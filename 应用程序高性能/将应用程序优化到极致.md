无论你采用了什么互联网中间件，用了什么分布式架构，逃不掉的是你的java代码去串联你的业务形态，只有把单机的应用程序优化到极致了，这样单机能力才具备水平扩展到可能。



### JVM内存结构

Jdk8之前

程序计数器：记录虚拟机字节码指令的地址（当前指令的地址），程序运行到哪里的一个指针，程序都是以线程的方式被CPU调度执行，每一个线程都有自己私有的程序计数器。

虚拟机栈：每个方法在执行的时候会创建一个栈帧，存储局部变量，操作数，动态链接，方法返回地址。

本地方法栈：结构和虚拟机栈类似，主要为虚拟机使用到的native方法服务。

堆：是被所有线程共享的一块内存区域，所有new出来的对象都会分配到堆区，在虚拟机启动的时候创建。

方法区：用于存储已经被虚拟机加载的类信息，常量，static静态变量等等。



Jdk8之后

开拓了【本地内存】空间，存放【元数据区】+【直接内存】，通过【元数据区】替代永久代，存放类信息，常量，static静态变量等，字符串在1.7开始放在了堆中。这样就不会有PermSize不足导致的困扰。

